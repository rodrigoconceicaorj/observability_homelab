{"version":3,"file":"getDefaultOTELInstrumentations.js","sourceRoot":"","sources":["../../src/getDefaultOTELInstrumentations.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,EAAE,oBAAoB,EAAE,MAAM,sCAAsC,CAAC;AAE5E,OAAO,EAAE,sBAAsB,EAAE,MAAM,0BAA0B,CAAC;AAClE,OAAO,EACL,wCAAwC,EACxC,sCAAsC,GACvC,MAAM,wBAAwB,CAAC;AAGhC,MAAM,UAAU,8BAA8B,CAAC,UAA0C,EAAE;IACzF,MAAM,EAAE,2BAA2B,EAAE,yBAAyB,KAAuB,OAAO,EAAzB,aAAa,UAAK,OAAO,EAAtF,4DAA4E,CAAU,CAAC;IAE7F,MAAM,SAAS,GAAG,iCAAiC,CAAC,2BAA2B,EAAE,aAAa,CAAC,CAAC;IAChG,MAAM,OAAO,GAAG,+BAA+B,CAAC,yBAAyB,EAAE,aAAa,CAAC,CAAC;IAE1F,OAAO,CAAC,IAAI,oBAAoB,CAAC,SAAS,CAAC,EAAE,IAAI,sBAAsB,CAAC,OAAO,CAAC,CAAC,CAAC;AACpF,CAAC;AACD,SAAS,iCAAiC,CACxC,2BAA0F,EAC1F,aAAsC;IAEtC,mEACK,aAAa,KAChB,mBAAmB,EAAE,IAAI,KAEtB,2BAA2B;QAC9B,4BAA4B;QAC5B,2BAA2B,EAAE,wCAAwC,CACnE,2BAA2B,aAA3B,2BAA2B,uBAA3B,2BAA2B,CAAE,2BAA2B,CACzD,IACD;AACJ,CAAC;AAED,SAAS,+BAA+B,CACtC,yBAAsF,EACtF,aAAsC;IAEtC,mEACK,aAAa,KAChB,mBAAmB,EAAE,IAAI,KAEtB,yBAAyB;QAC5B,4BAA4B;QAC5B,2BAA2B,EAAE,sCAAsC,CACjE,yBAAyB,aAAzB,yBAAyB,uBAAzB,yBAAyB,CAAE,2BAA2B,CACvD,IACD;AACJ,CAAC","sourcesContent":["import { FetchInstrumentation } from '@opentelemetry/instrumentation-fetch';\n\nimport { FaroXhrInstrumentation } from './faroXhrInstrumentation';\nimport {\n  fetchCustomAttributeFunctionWithDefaults,\n  xhrCustomAttributeFunctionWithDefaults,\n} from './instrumentationUtils';\nimport type { DefaultInstrumentationsOptions, InstrumentationOption } from './types';\n\nexport function getDefaultOTELInstrumentations(options: DefaultInstrumentationsOptions = {}): InstrumentationOption[] {\n  const { fetchInstrumentationOptions, xhrInstrumentationOptions, ...sharedOptions } = options;\n\n  const fetchOpts = createFetchInstrumentationOptions(fetchInstrumentationOptions, sharedOptions);\n  const xhrOpts = createXhrInstrumentationOptions(xhrInstrumentationOptions, sharedOptions);\n\n  return [new FetchInstrumentation(fetchOpts), new FaroXhrInstrumentation(xhrOpts)];\n}\nfunction createFetchInstrumentationOptions(\n  fetchInstrumentationOptions: DefaultInstrumentationsOptions['fetchInstrumentationOptions'],\n  sharedOptions: Record<string, unknown>\n) {\n  return {\n    ...sharedOptions,\n    ignoreNetworkEvents: true,\n    // keep this here to overwrite the defaults above if provided by the users\n    ...fetchInstrumentationOptions,\n    // always keep this function\n    applyCustomAttributesOnSpan: fetchCustomAttributeFunctionWithDefaults(\n      fetchInstrumentationOptions?.applyCustomAttributesOnSpan\n    ),\n  };\n}\n\nfunction createXhrInstrumentationOptions(\n  xhrInstrumentationOptions: DefaultInstrumentationsOptions['xhrInstrumentationOptions'],\n  sharedOptions: Record<string, unknown>\n) {\n  return {\n    ...sharedOptions,\n    ignoreNetworkEvents: true,\n    // keep this here to overwrite the defaults above if provided by the users\n    ...xhrInstrumentationOptions,\n    // always keep this function\n    applyCustomAttributesOnSpan: xhrCustomAttributeFunctionWithDefaults(\n      xhrInstrumentationOptions?.applyCustomAttributesOnSpan\n    ),\n  };\n}\n"]}