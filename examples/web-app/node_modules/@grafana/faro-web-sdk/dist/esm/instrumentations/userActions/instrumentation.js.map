{"version":3,"file":"instrumentation.js","sourceRoot":"","sources":["../../../../src/instrumentations/userActions/instrumentation.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,mBAAmB,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAC;AAExE,OAAO,EAAE,iCAAiC,EAAE,MAAM,SAAS,CAAC;AAC5D,OAAO,EAAE,mBAAmB,EAAE,MAAM,iCAAiC,CAAC;AAGtE,IAAI,uBAA2E,CAAC;AAEhF,MAAM,OAAO,yBAA0B,SAAQ,mBAAmB;IAAlE;;QACW,SAAI,GAAG,mDAAmD,CAAC;QAC3D,YAAO,GAAG,OAAO,CAAC;IAO7B,CAAC;IALC,UAAU;QACR,uBAAuB,GAAG,mBAAmB,CAAC,IAAI,CAAC,CAAC;QACpD,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,uBAAuB,CAAC,CAAC;QAChE,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC;IAC9D,CAAC;CACF;AAED,MAAM,UAAU,eAAe,CAAC,IAAY,EAAE,UAAmC;IAC/E,uBAAuB,aAAvB,uBAAuB,uBAAvB,uBAAuB,CAAG,wBAAwB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;AACxE,CAAC;AAED,SAAS,wBAAwB,CAAC,IAAY,EAAE,UAAmC;IACjF,OAAO;QACL,IAAI;QACJ,UAAU;QACV,IAAI,EAAE,iCAAiC;KACxC,CAAC;AACJ,CAAC","sourcesContent":["import { BaseInstrumentation, faro, VERSION } from '@grafana/faro-core';\n\nimport { userActionStartByApiCallEventName } from './const';\nimport { getUserEventHandler } from './processUserActionEventHandler';\nimport type { ApiEvent } from './types';\n\nlet processUserEventHandler: ReturnType<typeof getUserEventHandler> | undefined;\n\nexport class UserActionInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-user-action';\n  readonly version = VERSION;\n\n  initialize(): void {\n    processUserEventHandler = getUserEventHandler(faro);\n    window.addEventListener('pointerdown', processUserEventHandler);\n    window.addEventListener('keydown', processUserEventHandler);\n  }\n}\n\nexport function startUserAction(name: string, attributes?: Record<string, string>) {\n  processUserEventHandler?.(createUserActionApiEvent(name, attributes));\n}\n\nfunction createUserActionApiEvent(name: string, attributes?: Record<string, string>): ApiEvent {\n  return {\n    name,\n    attributes,\n    type: userActionStartByApiCallEventName,\n  };\n}\n"]}