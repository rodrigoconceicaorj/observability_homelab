{"version":3,"file":"instrumentation.js","sourceRoot":"","sources":["../../../../src/instrumentations/userActions/instrumentation.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAmBA,0CAEC;AArBD,gDAAwE;AAExE,iCAA4D;AAC5D,iFAAsE;AAGtE,IAAI,uBAA2E,CAAC;AAEhF;IAA+C,6CAAmB;IAAlE;;QACW,UAAI,GAAG,mDAAmD,CAAC;QAC3D,aAAO,GAAG,mBAAO,CAAC;;IAO7B,CAAC;IALC,8CAAU,GAAV;QACE,uBAAuB,GAAG,IAAA,mDAAmB,EAAC,gBAAI,CAAC,CAAC;QACpD,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,uBAAuB,CAAC,CAAC;QAChE,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC;IAC9D,CAAC;IACH,gCAAC;AAAD,CAAC,AATD,CAA+C,+BAAmB,GASjE;AATY,8DAAyB;AAWtC,SAAgB,eAAe,CAAC,IAAY,EAAE,UAAmC;IAC/E,uBAAuB,aAAvB,uBAAuB,uBAAvB,uBAAuB,CAAG,wBAAwB,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;AACxE,CAAC;AAED,SAAS,wBAAwB,CAAC,IAAY,EAAE,UAAmC;IACjF,OAAO;QACL,IAAI,MAAA;QACJ,UAAU,YAAA;QACV,IAAI,EAAE,yCAAiC;KACxC,CAAC;AACJ,CAAC","sourcesContent":["import { BaseInstrumentation, faro, VERSION } from '@grafana/faro-core';\n\nimport { userActionStartByApiCallEventName } from './const';\nimport { getUserEventHandler } from './processUserActionEventHandler';\nimport type { ApiEvent } from './types';\n\nlet processUserEventHandler: ReturnType<typeof getUserEventHandler> | undefined;\n\nexport class UserActionInstrumentation extends BaseInstrumentation {\n  readonly name = '@grafana/faro-web-sdk:instrumentation-user-action';\n  readonly version = VERSION;\n\n  initialize(): void {\n    processUserEventHandler = getUserEventHandler(faro);\n    window.addEventListener('pointerdown', processUserEventHandler);\n    window.addEventListener('keydown', processUserEventHandler);\n  }\n}\n\nexport function startUserAction(name: string, attributes?: Record<string, string>) {\n  processUserEventHandler?.(createUserActionApiEvent(name, attributes));\n}\n\nfunction createUserActionApiEvent(name: string, attributes?: Record<string, string>): ApiEvent {\n  return {\n    name,\n    attributes,\n    type: userActionStartByApiCallEventName,\n  };\n}\n"]}