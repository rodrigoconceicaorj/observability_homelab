{"version":3,"file":"reactive.js","sourceRoot":"","sources":["../../../src/utils/reactive.ts"],"names":[],"mappings":"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","sourcesContent":["export type Subscription = {\n  unsubscribe: () => void;\n};\n\ntype Subscriber<T> = (value: T) => void;\n\nexport class Observable<T = any> {\n  private subscribers: Array<Subscriber<T>> = [];\n\n  subscribe(subscriber: Subscriber<T>): Subscription {\n    this.subscribers.push(subscriber);\n    return {\n      unsubscribe: () => this.unsubscribe(subscriber),\n    };\n  }\n\n  unsubscribe(subscriber: Subscriber<T>): void {\n    this.subscribers = this.subscribers.filter((sub) => sub !== subscriber);\n  }\n\n  notify(value: T): void {\n    this.subscribers.forEach((subscriber) => subscriber(value));\n  }\n\n  first(): Observable<T> {\n    const result = new Observable<T>();\n\n    const internalSubscriber = (data: T): void => {\n      result.notify(data);\n      subscription.unsubscribe();\n    };\n    const subscription = this.subscribe(internalSubscriber);\n    const resultUnsubscribeFn = result.unsubscribe.bind(result);\n    return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n  }\n\n  takeWhile(predicate: (value: T) => boolean): Observable<T> {\n    const result = new Observable<T>();\n    const internalSubscriber = (value: T): void => {\n      if (predicate(value)) {\n        result.notify(value);\n      } else {\n        result.unsubscribe(internalSubscriber);\n      }\n    };\n    this.subscribe(internalSubscriber);\n    const resultUnsubscribeFn = result.unsubscribe.bind(result);\n    return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n  }\n\n  filter(predicate: (value: T) => boolean): Observable<T> {\n    const result = new Observable<T>();\n\n    const internalSubscriber = (value: T): void => {\n      if (predicate(value)) {\n        result.notify(value);\n      }\n    };\n    this.subscribe(internalSubscriber);\n\n    const resultUnsubscribeFn = result.unsubscribe.bind(result);\n    return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n  }\n\n  merge(...observables: Array<Observable<T>>): Observable<T> {\n    const mergerObservable = new Observable<T>();\n    const subscriptions: Subscription[] = [];\n\n    observables.forEach((observable) => {\n      const subscription = observable.subscribe((value: T) => {\n        mergerObservable.notify(value);\n      });\n\n      subscriptions.push(subscription);\n    });\n\n    const originalUnsubscribeAll = mergerObservable.unsubscribeAll.bind(mergerObservable);\n\n    mergerObservable.unsubscribe = () => {\n      subscriptions.forEach((subscription) => subscription.unsubscribe());\n      originalUnsubscribeAll();\n    };\n\n    return mergerObservable;\n  }\n\n  private withUnsubscribeOverride(\n    observable: Observable<T>,\n    resultUnsubscribeFn: (subscriber: Subscriber<T>) => void,\n    internalSubscriber: Subscriber<T>\n  ) {\n    observable.unsubscribe = (subscriber: Subscriber<T>) => {\n      resultUnsubscribeFn(subscriber);\n      this.unsubscribe(internalSubscriber);\n    };\n\n    return observable;\n  }\n\n  private unsubscribeAll(): void {\n    this.subscribers = [];\n  }\n}\n"]}